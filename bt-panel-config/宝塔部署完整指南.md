# Coinmint 网站宝塔面板部署完整指南

## 📋 部署前准备

### 1. 服务器要求
- **操作系统**: CentOS 7+, Ubuntu 18+, Debian 9+
- **内存**: 最低 1GB，推荐 2GB+
- **硬盘**: 最低 20GB 可用空间
- **网络**: 公网IP，开放 80、443、8888 端口

### 2. 域名准备
- 已备案的域名（如果服务器在中国大陆）
- 域名DNS解析指向服务器IP
- 建议同时解析 www 和 @ 记录

## 🚀 第一步：安装宝塔面板

### Linux 一键安装命令
```bash
# CentOS/RHEL
yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh

# Ubuntu/Debian
wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh
```

### 安装完成后
1. 记录面板地址、用户名、密码
2. 登录宝塔面板：`http://服务器IP:8888`
3. 绑定宝塔账号（推荐）

## 🔧 第二步：安装运行环境

### 推荐软件组合
- **Web服务器**: Nginx 1.20+ （推荐）或 Apache 2.4+
- **PHP**: PHP 7.4+ （虽然是静态网站，但宝塔可能需要）
- **数据库**: 不需要（静态网站）
- **其他**: phpMyAdmin（可选）

### 安装步骤
1. 进入宝塔面板
2. 点击"软件商店"
3. 选择"运行环境"
4. 安装 Nginx（一键部署）
5. 等待安装完成

## 🌐 第三步：添加网站

### 1. 创建网站
1. 点击"网站" → "添加站点"
2. 填写域名：`your-domain.com,www.your-domain.com`
3. 选择根目录：`/www/wwwroot/your-domain.com`
4. 选择PHP版本：7.4+（备用）
5. 不创建数据库
6. 点击"提交"

### 2. 上传网站文件
**方法一：在线文件管理器**
1. 点击网站行的"根目录"
2. 删除默认的 index.html
3. 上传所有网站文件到根目录
4. 确保 index.html 在根目录

**方法二：FTP上传**
1. 点击"FTP" → "添加FTP"
2. 使用FTP客户端上传文件

**方法三：Git部署（推荐）**
```bash
cd /www/wwwroot/your-domain.com
git clone https://github.com/x200067/coinmint-siteeee.git .
```

## 🔒 第四步：配置SSL证书

### 1. 申请免费SSL证书
1. 点击网站行的"设置"
2. 选择"SSL"标签
3. 选择"Let's Encrypt"
4. 填写邮箱地址
5. 点击"申请"
6. 等待证书申请成功

### 2. 强制HTTPS
1. 在SSL页面开启"强制HTTPS"
2. 开启"HSTS"（可选，增强安全性）

## ⚙️ 第五步：优化配置

### 1. 导入Nginx配置
1. 点击网站"设置" → "配置文件"
2. 替换为提供的 `nginx.conf` 内容
3. 修改域名为实际域名
4. 保存并重载配置

### 2. 设置伪静态（如果使用Apache）
1. 点击"伪静态"
2. 粘贴提供的 `.htaccess` 内容
3. 保存

### 3. 开启网站压缩
1. 点击"网站" → "设置" → "性能"
2. 开启"Gzip压缩"
3. 压缩级别选择 6

## 🔍 第六步：SEO优化配置

### 1. 上传SEO文件
确保以下文件在网站根目录：
- `robots.txt` - 搜索引擎爬虫规则
- `sitemap.xml` - 网站地图

### 2. 搜索引擎验证
1. 访问各搜索引擎站长平台
2. 添加网站并验证所有权
3. 上传验证文件到根目录
4. 提交sitemap.xml

### 3. 推荐的搜索引擎平台
- **Google**: [Google Search Console](https://search.google.com/search-console)
- **百度**: [百度站长平台](https://ziyuan.baidu.com)
- **360**: [360站长平台](https://zhanzhang.so.com)
- **搜狗**: [搜狗站长平台](https://zhanzhang.sogou.com)

## 🛡️ 第七步：安全配置

### 1. 防火墙设置
1. 点击"安全"
2. 开启防火墙
3. 确保开放 80、443 端口
4. 关闭不必要的端口

### 2. 网站防护
1. 安装"Nginx防火墙"插件
2. 开启CC防护
3. 设置IP白名单（可选）

### 3. 定期备份
1. 点击"计划任务"
2. 添加"备份网站"任务
3. 设置每日备份
4. 保留7天备份

## 📊 第八步：监控和维护

### 1. 性能监控
1. 安装"网站监控报表"插件
2. 查看访问统计
3. 监控服务器资源使用

### 2. 日志管理
1. 定期查看访问日志
2. 监控错误日志
3. 设置日志轮转

## ✅ 部署检查清单

- [ ] 宝塔面板安装完成
- [ ] Nginx安装并运行正常
- [ ] 网站文件上传完成
- [ ] 域名解析正确
- [ ] SSL证书申请成功
- [ ] 强制HTTPS开启
- [ ] 网站可正常访问
- [ ] robots.txt 可访问
- [ ] sitemap.xml 可访问
- [ ] 搜索引擎验证完成
- [ ] 防火墙配置正确
- [ ] 备份任务设置完成

## 🆘 常见问题解决

### 1. 网站无法访问
- 检查域名解析是否正确
- 确认防火墙端口开放
- 查看Nginx错误日志

### 2. SSL证书申请失败
- 确认域名解析正确
- 检查80端口是否开放
- 尝试手动申请证书

### 3. 搜索引擎无法收录
- 检查robots.txt配置
- 提交sitemap.xml
- 确保网站内容质量

## 📞 技术支持

如遇到问题，可以：
1. 查看宝塔面板官方文档
2. 联系宝塔技术支持
3. 参考网站错误日志

## 🚀 快速部署脚本

### 一键部署脚本（在服务器上运行）
```bash
#!/bin/bash
# Coinmint 网站快速部署脚本

echo "开始部署 Coinmint 网站..."

# 设置变量（请修改为实际值）
DOMAIN="your-domain.com"
WEBROOT="/www/wwwroot/$DOMAIN"
REPO_URL="https://github.com/x200067/coinmint-siteeee.git"

# 创建网站目录
mkdir -p $WEBROOT
cd $WEBROOT

# 克隆网站文件
echo "下载网站文件..."
git clone $REPO_URL .

# 设置权限
chown -R www:www $WEBROOT
chmod -R 755 $WEBROOT

# 复制配置文件
cp bt-panel-config/.htaccess $WEBROOT/
cp robots.txt $WEBROOT/
cp sitemap.xml $WEBROOT/

echo "网站文件部署完成！"
echo "请在宝塔面板中："
echo "1. 添加网站: $DOMAIN"
echo "2. 申请SSL证书"
echo "3. 配置Nginx规则"
echo "4. 开启防火墙"
```

### 域名配置检查脚本
```bash
#!/bin/bash
# 检查域名解析状态

DOMAIN="your-domain.com"
SERVER_IP=$(curl -s ifconfig.me)

echo "检查域名解析状态..."
echo "服务器IP: $SERVER_IP"
echo "域名解析:"
nslookup $DOMAIN
nslookup www.$DOMAIN

echo "检查端口开放状态:"
netstat -tlnp | grep :80
netstat -tlnp | grep :443
```

---

**重要提醒**:
- 定期更新宝塔面板和插件
- 定期备份网站数据
- 监控服务器安全状态
- 保持SSL证书有效性
